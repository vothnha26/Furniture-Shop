{
	"info": {
		"_postman_id": "hd-payment-thanhtoan-2025",
		"name": "Hóa Đơn - Payment - Thanh Toán API",
		"description": "Collection để test HoaDonController, PaymentController và ThanhToanController",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "HoaDon Controller",
			"item": [
				{
					"name": "Get Thống Kê Hóa Đơn",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/hoadon/thongke",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"hoadon",
								"thongke"
							]
						},
						"description": "Lấy thống kê tổng quan về hóa đơn"
					},
					"response": []
				},
				{
					"name": "Get All Hóa Đơn",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/hoadon",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"hoadon"
							]
						},
						"description": "Lấy danh sách tất cả hóa đơn"
					},
					"response": []
				},
				{
					"name": "Get All Hóa Đơn (With Search)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/hoadon?search=HD001",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"hoadon"
							],
							"query": [
								{
									"key": "search",
									"value": "HD001",
									"description": "Tìm kiếm hóa đơn theo từ khóa"
								}
							]
						},
						"description": "Tìm kiếm hóa đơn theo từ khóa"
					},
					"response": []
				},
				{
					"name": "Get Hóa Đơn By ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/hoadon/1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"hoadon",
								"1"
							]
						},
						"description": "Lấy chi tiết hóa đơn theo ID"
					},
					"response": []
				},
				{
					"name": "Update Hóa Đơn",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"trangThai\": \"COMPLETED\",\n  \"ghiChu\": \"Hóa đơn đã hoàn thành\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/hoadon/1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"hoadon",
								"1"
							]
						},
						"description": "Cập nhật thông tin hóa đơn"
					},
					"response": []
				},
				{
					"name": "Delete Hóa Đơn",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/hoadon/1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"hoadon",
								"1"
							]
						},
						"description": "Xóa hóa đơn theo ID"
					},
					"response": []
				}
			],
			"description": "API endpoints cho quản lý hóa đơn"
		},
		{
			"name": "Payment Controller (VNPAY)",
			"item": [
				{
					"name": "Create Payment Link",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/payment/create/1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"payment",
								"create",
								"1"
							]
						},
						"description": "Tạo link thanh toán VNPAY cho đơn hàng. Response sẽ trả về URL để redirect user đến trang thanh toán VNPAY."
					},
					"response": []
				},
				{
					"name": "Payment Return (VNPAY Callback)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/payment/return?vnp_ResponseCode=00&vnp_OrderInfo=Thanh toan don hang: 1&vnp_Amount=10000000&vnp_TxnRef=12345678",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"payment",
								"return"
							],
							"query": [
								{
									"key": "vnp_ResponseCode",
									"value": "00",
									"description": "00: Thành công, 24: Hủy giao dịch"
								},
								{
									"key": "vnp_OrderInfo",
									"value": "Thanh toan don hang: 1"
								},
								{
									"key": "vnp_Amount",
									"value": "10000000"
								},
								{
									"key": "vnp_TxnRef",
									"value": "12345678"
								}
							]
						},
						"description": "Endpoint callback từ VNPAY sau khi user thanh toán. VNPAY sẽ redirect về đây với các tham số."
					},
					"response": []
				},
				{
					"name": "Payment Return - Failed",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/payment/return?vnp_ResponseCode=24&vnp_OrderInfo=Thanh toan don hang: 1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"payment",
								"return"
							],
							"query": [
								{
									"key": "vnp_ResponseCode",
									"value": "24",
									"description": "24: Giao dịch bị hủy"
								},
								{
									"key": "vnp_OrderInfo",
									"value": "Thanh toan don hang: 1"
								}
							]
						},
						"description": "Test trường hợp thanh toán thất bại hoặc bị hủy"
					},
					"response": []
				}
			],
			"description": "API endpoints cho thanh toán qua VNPAY"
		},
		{
			"name": "ThanhToan Controller",
			"item": [
				{
					"name": "Get Thống Kê Thanh Toán",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/thanhtoan/thongke",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"thanhtoan",
								"thongke"
							]
						},
						"description": "Lấy dữ liệu thống kê thanh toán (4 thẻ thống kê)"
					},
					"response": []
				},
				{
					"name": "Get All Thanh Toán",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/thanhtoan",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"thanhtoan"
							]
						},
						"description": "Lấy danh sách tất cả giao dịch thanh toán"
					},
					"response": []
				},
				{
					"name": "Get Thanh Toán (Filter by Status)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/thanhtoan?trangThai=Hoàn thành",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"thanhtoan"
							],
							"query": [
								{
									"key": "trangThai",
									"value": "Hoàn thành",
									"description": "Lọc theo trạng thái: Hoàn thành, Đang xử lý, Thất bại"
								}
							]
						},
						"description": "Lọc giao dịch theo trạng thái"
					},
					"response": []
				},
				{
					"name": "Get Thanh Toán (Filter by Method)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/thanhtoan?phuongThuc=Tiền mặt",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"thanhtoan"
							],
							"query": [
								{
									"key": "phuongThuc",
									"value": "Tiền mặt",
									"description": "Lọc theo phương thức: Tiền mặt, Chuyển khoản, VNPAY"
								}
							]
						},
						"description": "Lọc giao dịch theo phương thức thanh toán"
					},
					"response": []
				},
				{
					"name": "Get Thanh Toán (Filter Both)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/thanhtoan?trangThai=Hoàn thành&phuongThuc=VNPAY",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"thanhtoan"
							],
							"query": [
								{
									"key": "trangThai",
									"value": "Hoàn thành"
								},
								{
									"key": "phuongThuc",
									"value": "VNPAY"
								}
							]
						},
						"description": "Lọc giao dịch theo cả trạng thái và phương thức"
					},
					"response": []
				},
				{
					"name": "Get Thanh Toán By ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/thanhtoan/1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"thanhtoan",
								"1"
							]
						},
						"description": "Xem chi tiết một giao dịch thanh toán (dùng cho popup)"
					},
					"response": []
				},
				{
					"name": "Get Thanh Toán By Đơn Hàng",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/thanhtoan/donhang/1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"thanhtoan",
								"donhang",
								"1"
							]
						},
						"description": "Lấy tất cả giao dịch thanh toán của một đơn hàng"
					},
					"response": []
				},
				{
					"name": "Tạo Giao Dịch Mới",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"maDonHang\": 1,\n  \"soTien\": 5000000,\n  \"phuongThucThanhToan\": \"Tiền mặt\",\n  \"ghiChu\": \"Thanh toán một phần\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/thanhtoan",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"thanhtoan"
							]
						},
						"description": "Tạo giao dịch thanh toán mới"
					},
					"response": []
				},
				{
					"name": "Cập Nhật Trạng Thái",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"trangThai\": \"Hoàn thành\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/thanhtoan/1/trangthai",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"thanhtoan",
								"1",
								"trangthai"
							]
						},
						"description": "Cập nhật trạng thái của giao dịch thanh toán"
					},
					"response": []
				},
				{
					"name": "Xem Giỏ Hàng",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "[\n  {\n    \"maBienThe\": 1,\n    \"soLuong\": 2,\n    \"maDichVu\": null\n  },\n  {\n    \"maBienThe\": 2,\n    \"soLuong\": 1,\n    \"maDichVu\": 1\n  }\n]"
						},
						"url": {
							"raw": "{{base_url}}/api/thanhtoan/xem-gio-hang",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"thanhtoan",
								"xem-gio-hang"
							]
						},
						"description": "Xem tổng quan giỏ hàng với danh sách sản phẩm và dịch vụ"
					},
					"response": []
				},
				{
					"name": "Nhập Thông Tin Giao Hàng",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"tenNguoiNhan\": \"Nguyễn Văn A\",\n  \"soDienThoaiNhan\": \"0901234567\",\n  \"diaChiGiaoHang\": \"123 Đường ABC, Quận 1, TP.HCM\",\n  \"ghiChu\": \"Giao hàng giờ hành chính\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/thanhtoan/thong-tin-giao-hang",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"thanhtoan",
								"thong-tin-giao-hang"
							]
						},
						"description": "Nhập thông tin giao hàng (Bước 2)"
					},
					"response": []
				},
				{
					"name": "Tạo Đơn Hàng Từ User",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"maKhachHang\": 1,\n  \"tenNguoiNhan\": \"Nguyễn Văn A\",\n  \"soDienThoaiNhan\": \"0901234567\",\n  \"diaChiGiaoHang\": \"123 Đường ABC, Quận 1, TP.HCM\",\n  \"phuongThucThanhToan\": \"VNPAY\",\n  \"phuongThucGiaoHang\": \"Giao hàng nhanh\",\n  \"ghiChu\": \"Giao hàng trong giờ hành chính\",\n  \"dsSanPham\": [\n    {\n      \"maBienThe\": 1,\n      \"soLuong\": 2,\n      \"maDichVu\": null\n    },\n    {\n      \"maBienThe\": 2,\n      \"soLuong\": 1,\n      \"maDichVu\": 1\n    }\n  ],\n  \"maVoucher\": null,\n  \"diemSuDung\": 100\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/thanhtoan/tao-don-hang",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"thanhtoan",
								"tao-don-hang"
							]
						},
						"description": "Tạo đơn hàng mới từ phía user (kết hợp giỏ hàng + thông tin giao hàng)"
					},
					"response": []
				}
			],
			"description": "API endpoints cho quản lý thanh toán và tạo đơn hàng"
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8080",
			"type": "string"
		}
	]
}
