# ğŸ“¬ Postman Collection - Há»‡ Thá»‘ng Khuyáº¿n MÃ£i KÃ©p

## ğŸ“¦ Files trong thÆ° má»¥c

1. **Promotion-System.postman_collection.json** - Collection chÃ­nh vá»›i táº¥t cáº£ API
2. **Promotion-Environment.postman_environment.json** - Environment variables
3. **README.md** - HÆ°á»›ng dáº«n sá»­ dá»¥ng (file nÃ y)

---

## ğŸš€ CÃ¡ch Import vÃ o Postman

### BÆ°á»›c 1: Má»Ÿ Postman

### BÆ°á»›c 2: Import Collection
1. Click **Import** á»Ÿ gÃ³c trÃªn bÃªn trÃ¡i
2. KÃ©o tháº£ hoáº·c chá»n file `Promotion-System.postman_collection.json`
3. Click **Import**

### BÆ°á»›c 3: Import Environment
1. Click **Import** tiáº¿p
2. Chá»n file `Promotion-Environment.postman_environment.json`
3. Click **Import**

### BÆ°á»›c 4: Chá»n Environment
1. á» gÃ³c trÃªn bÃªn pháº£i, click dropdown **No Environment**
2. Chá»n **Promotion System - Development**

---

## ğŸ“ Cáº¥u TrÃºc Collection

```
Há»‡ Thá»‘ng Khuyáº¿n MÃ£i KÃ©p
â”‚
â”œâ”€â”€ 1. ChÆ°Æ¡ng TrÃ¬nh Giáº£m GiÃ¡ Sáº£n Pháº©m
â”‚   â”œâ”€â”€ Admin - CRUD
â”‚   â”‚   â”œâ”€â”€ 1.1 Táº¡o chÆ°Æ¡ng trÃ¬nh Ä‘Æ¡n giáº£n
â”‚   â”‚   â”œâ”€â”€ 1.2 Táº¡o chÆ°Æ¡ng trÃ¬nh kÃ¨m biáº¿n thá»ƒ
â”‚   â”‚   â”œâ”€â”€ 1.3 Láº¥y táº¥t cáº£ chÆ°Æ¡ng trÃ¬nh (cÆ¡ báº£n)
â”‚   â”‚   â”œâ”€â”€ 1.4 Láº¥y táº¥t cáº£ chÆ°Æ¡ng trÃ¬nh (chi tiáº¿t)
â”‚   â”‚   â”œâ”€â”€ 1.5 Láº¥y chi tiáº¿t 1 chÆ°Æ¡ng trÃ¬nh
â”‚   â”‚   â”œâ”€â”€ 1.6 ThÃªm biáº¿n thá»ƒ vÃ o chÆ°Æ¡ng trÃ¬nh
â”‚   â”‚   â”œâ”€â”€ 1.7 XÃ³a biáº¿n thá»ƒ khá»i chÆ°Æ¡ng trÃ¬nh
â”‚   â”‚   â”œâ”€â”€ 1.8 Cáº­p nháº­t chÆ°Æ¡ng trÃ¬nh kÃ¨m biáº¿n thá»ƒ
â”‚   â”‚   â””â”€â”€ 1.9 XÃ³a chÆ°Æ¡ng trÃ¬nh
â”‚   â”‚
â”‚   â””â”€â”€ KhÃ¡ch HÃ ng - Xem GiÃ¡
â”‚       â”œâ”€â”€ 2.1 Xem giÃ¡ hiá»ƒn thá»‹ cá»§a biáº¿n thá»ƒ
â”‚       â””â”€â”€ 2.2 Xem chi tiáº¿t giÃ¡ cá»§a biáº¿n thá»ƒ
â”‚
â”œâ”€â”€ 2. Há»‡ Thá»‘ng Voucher
â”‚   â”œâ”€â”€ Admin - CRUD Voucher
â”‚   â”‚   â”œâ”€â”€ 3.1 Táº¡o voucher cho má»i ngÆ°á»i (% giáº£m)
â”‚   â”‚   â”œâ”€â”€ 3.2 Táº¡o voucher cho má»i ngÆ°á»i (giáº£m cá»‘ Ä‘á»‹nh)
â”‚   â”‚   â”œâ”€â”€ 3.3 Táº¡o voucher cho háº¡ng VIP
â”‚   â”‚   â”œâ”€â”€ 3.4 Láº¥y táº¥t cáº£ voucher (cÆ¡ báº£n)
â”‚   â”‚   â”œâ”€â”€ 3.5 Láº¥y táº¥t cáº£ voucher (chi tiáº¿t)
â”‚   â”‚   â”œâ”€â”€ 3.6 Láº¥y chi tiáº¿t 1 voucher
â”‚   â”‚   â”œâ”€â”€ 3.7 Cáº­p nháº­t voucher
â”‚   â”‚   â””â”€â”€ 3.8 XÃ³a voucher
â”‚   â”‚
â”‚   â””â”€â”€ KhÃ¡ch HÃ ng - Sá»­ Dá»¥ng Voucher
â”‚       â”œâ”€â”€ 4.1 Xem voucher cÃ³ thá»ƒ dÃ¹ng
â”‚       â”œâ”€â”€ 4.2 Ãp dá»¥ng voucher (chi tiáº¿t)
â”‚       â””â”€â”€ 4.3 Ãp dá»¥ng voucher (sá»‘ tiá»n giáº£m)
â”‚
â””â”€â”€ 3. Ká»‹ch Báº£n Test Tá»•ng Há»£p
    â””â”€â”€ Ká»‹ch Báº£n 1: Mua hÃ ng cÃ³ giáº£m giÃ¡ + voucher
        â”œâ”€â”€ BÆ°á»›c 1: Xem giÃ¡ sáº£n pháº©m 1
        â”œâ”€â”€ BÆ°á»›c 2: Xem giÃ¡ sáº£n pháº©m 2
        â”œâ”€â”€ BÆ°á»›c 3: Xem voucher cÃ³ thá»ƒ dÃ¹ng
        â””â”€â”€ BÆ°á»›c 4: Ãp dá»¥ng voucher
```

---

## ğŸ¯ HÆ°á»›ng Dáº«n Test Theo Thá»© Tá»±

### ğŸ“ Chuáº©n Bá»‹
1. Khá»Ÿi Ä‘á»™ng server: `./mvnw spring-boot:run`
2. Äáº£m báº£o cÃ³ dá»¯ liá»‡u máº«u (SanPham, BienTheSanPham, KhachHang, HangThanhVien)

---

### ğŸ¨ Test Flow 1: ChÆ°Æ¡ng TrÃ¬nh Giáº£m GiÃ¡

#### **BÆ°á»›c 1: Táº¡o chÆ°Æ¡ng trÃ¬nh kÃ¨m biáº¿n thá»ƒ**
```
POST /api/v1/chuong-trinh-giam-gia/with-details
```
- Request máº«u cÃ³ sáºµn trong collection
- LÆ°u láº¡i `maChuongTrinhGiamGia` tá»« response

#### **BÆ°á»›c 2: Xem danh sÃ¡ch chÆ°Æ¡ng trÃ¬nh**
```
GET /api/v1/chuong-trinh-giam-gia/details
```
- Kiá»ƒm tra chÆ°Æ¡ng trÃ¬nh vá»«a táº¡o
- Xem tráº¡ng thÃ¡i: `CHUA_BAT_DAU`, `DANG_DIEN_RA`, `DA_KET_THUC`

#### **BÆ°á»›c 3: Xem giÃ¡ sáº£n pháº©m (KhÃ¡ch hÃ ng)**
```
GET /api/v1/chuong-trinh-giam-gia/bien-the/1/gia-chi-tiet
```
- Xem giÃ¡ gá»‘c, giÃ¡ sau giáº£m
- Xem % giáº£m, tiáº¿t kiá»‡m
- Xem cÃ¡c chÆ°Æ¡ng trÃ¬nh Ä‘ang Ã¡p dá»¥ng

#### **BÆ°á»›c 4: ThÃªm biáº¿n thá»ƒ má»›i vÃ o chÆ°Æ¡ng trÃ¬nh**
```
POST /api/v1/chuong-trinh-giam-gia/1/bien-the/5?giaSauGiam=2500000
```

#### **BÆ°á»›c 5: Cáº­p nháº­t chÆ°Æ¡ng trÃ¬nh**
```
PUT /api/v1/chuong-trinh-giam-gia/1/with-details
```
- Thay Ä‘á»•i danh sÃ¡ch biáº¿n thá»ƒ
- Sá»­a ngÃ y báº¯t Ä‘áº§u/káº¿t thÃºc

---

### ğŸŸï¸ Test Flow 2: Voucher

#### **BÆ°á»›c 1: Táº¡o voucher giáº£m % cho má»i ngÆ°á»i**
```
POST /api/v1/voucher
Body: TETALE2025 - giáº£m 15%
```

#### **BÆ°á»›c 2: Táº¡o voucher giáº£m cá»‘ Ä‘á»‹nh cho VIP**
```
POST /api/v1/voucher
Body: VIP2025 - giáº£m 500.000Ä‘ cho háº¡ng 2,3
```

#### **BÆ°á»›c 3: Xem táº¥t cáº£ voucher**
```
GET /api/v1/voucher/details
```
- Kiá»ƒm tra tráº¡ng thÃ¡i voucher
- Xem háº¡ng thÃ nh viÃªn Ã¡p dá»¥ng

#### **BÆ°á»›c 4: KhÃ¡ch hÃ ng xem voucher cÃ³ thá»ƒ dÃ¹ng**
```
GET /api/v1/voucher/eligible/1/details
```
- Thay `1` báº±ng mÃ£ khÃ¡ch hÃ ng thá»±c táº¿
- Voucher hiá»ƒn thá»‹ dá»±a trÃªn háº¡ng thÃ nh viÃªn

#### **BÆ°á»›c 5: Ãp dá»¥ng voucher**
```
POST /api/v1/voucher/apply/details
Body: {
  "maCode": "TETALE2025",
  "tongTienDonHang": 10000000,
  "maKhachHang": 1
}
```
- Xem sá»‘ tiá»n giáº£m
- Xem tá»•ng tiá»n sau giáº£m

---

### ğŸ­ Test Flow 3: Ká»‹ch Báº£n Tá»•ng Há»£p

**Má»¥c tiÃªu:** Mua 2 sáº£n pháº©m cÃ³ giáº£m giÃ¡ + dÃ¹ng voucher

#### **BÆ°á»›c 1: Xem giÃ¡ sáº£n pháº©m 1**
```
GET /api/v1/chuong-trinh-giam-gia/bien-the/1/gia-chi-tiet
```
**Káº¿t quáº£ giáº£ Ä‘á»‹nh:**
- GiÃ¡ gá»‘c: 5.000.000Ä‘
- GiÃ¡ sau giáº£m: 4.500.000Ä‘
- Tiáº¿t kiá»‡m: 500.000Ä‘

#### **BÆ°á»›c 2: Xem giÃ¡ sáº£n pháº©m 2**
```
GET /api/v1/chuong-trinh-giam-gia/bien-the/2/gia-chi-tiet
```
**Káº¿t quáº£ giáº£ Ä‘á»‹nh:**
- GiÃ¡ gá»‘c: 3.500.000Ä‘
- GiÃ¡ sau giáº£m: 3.200.000Ä‘
- Tiáº¿t kiá»‡m: 300.000Ä‘

**â¡ï¸ Tá»•ng giá» hÃ ng: 7.700.000Ä‘**

#### **BÆ°á»›c 3: Xem voucher cÃ³ thá»ƒ dÃ¹ng**
```
GET /api/v1/voucher/eligible/1/details
```
**Káº¿t quáº£:** Tháº¥y voucher `TETALE2025` giáº£m 15%

#### **BÆ°á»›c 4: Ãp dá»¥ng voucher**
```
POST /api/v1/voucher/apply/details
{
  "maCode": "TETALE2025",
  "tongTienDonHang": 7700000,
  "maKhachHang": 1
}
```

**Káº¿t quáº£:**
```json
{
  "success": true,
  "message": "Ãp dá»¥ng voucher thÃ nh cÃ´ng!",
  "maCode": "TETALE2025",
  "tongTienGoc": 7700000,
  "soTienGiam": 1155000,
  "tongTienSauGiam": 6545000,
  "loaiGiamGia": "PERCENT",
  "giaTriGiam": 15
}
```

**ğŸ’° Tá»•ng Tiáº¿t Kiá»‡m:**
- Giáº£m giÃ¡ sáº£n pháº©m: 800.000Ä‘
- Giáº£m giÃ¡ voucher: 1.155.000Ä‘
- **Tá»•ng: 1.955.000Ä‘**
- **Thanh toÃ¡n: 6.545.000Ä‘** (thay vÃ¬ 8.5tr)

---

## ğŸ”§ Environment Variables

| Variable | MÃ´ táº£ | GiÃ¡ trá»‹ máº·c Ä‘á»‹nh |
|----------|-------|------------------|
| `base_url` | URL server | `http://localhost:8080` |
| `chuong_trinh_id` | ID chÆ°Æ¡ng trÃ¬nh Ä‘á»ƒ test | `1` |
| `bien_the_id` | ID biáº¿n thá»ƒ Ä‘á»ƒ test | `1` |
| `voucher_id` | ID voucher Ä‘á»ƒ test | `1` |
| `khach_hang_id` | ID khÃ¡ch hÃ ng Ä‘á»ƒ test | `1` |

**CÃ¡ch thay Ä‘á»•i:**
1. Click vÃ o Environment á»Ÿ gÃ³c pháº£i
2. Click Edit
3. Sá»­a giÃ¡ trá»‹
4. Save

---

## ğŸ“Š Test Cases Quan Trá»ng

### âœ… Test Case 1: Táº¡o chÆ°Æ¡ng trÃ¬nh thÃ nh cÃ´ng
- **Request:** POST vá»›i data há»£p lá»‡
- **Expected:** Status 200, tráº£ vá» object chÆ°Æ¡ng trÃ¬nh

### âœ… Test Case 2: GiÃ¡ hiá»ƒn thá»‹ Ä‘Ãºng
- **Request:** GET giÃ¡ cá»§a biáº¿n thá»ƒ cÃ³ nhiá»u chÆ°Æ¡ng trÃ¬nh
- **Expected:** Láº¥y giÃ¡ tháº¥p nháº¥t

### âœ… Test Case 3: Táº¡o voucher cho VIP
- **Request:** POST vá»›i `apDungChoMoiNguoi = false`
- **Expected:** Chá»‰ háº¡ng Ä‘Æ°á»£c chá»n má»›i tháº¥y voucher

### âœ… Test Case 4: Ãp dá»¥ng voucher háº¿t háº¡n
- **Request:** POST vá»›i voucher Ä‘Ã£ háº¿t háº¡n
- **Expected:** Status 400, message "Voucher Ä‘Ã£ háº¿t háº¡n"

### âœ… Test Case 5: Ãp dá»¥ng voucher khÃ´ng Ä‘á»§ háº¡ng
- **Request:** POST vá»›i khÃ¡ch hÃ ng khÃ´ng Ä‘á»§ háº¡ng
- **Expected:** Status 400, message "KhÃ´ng Ã¡p dá»¥ng cho háº¡ng..."

### âœ… Test Case 6: Voucher giáº£m khÃ´ng vÆ°á»£t tá»•ng tiá»n
- **Request:** Voucher giáº£m 1tr nhÆ°ng Ä‘Æ¡n hÃ ng 500k
- **Expected:** Chá»‰ giáº£m 500k

---

## ğŸ› Troubleshooting

### âŒ Lá»—i: Connection Refused
**NguyÃªn nhÃ¢n:** Server chÆ°a cháº¡y
**Giáº£i phÃ¡p:** Cháº¡y `./mvnw spring-boot:run`

### âŒ Lá»—i: 404 Not Found
**NguyÃªn nhÃ¢n:** URL sai hoáº·c context path khÃ¡c
**Giáº£i phÃ¡p:** Kiá»ƒm tra `application.properties`

### âŒ Lá»—i: 400 Bad Request - Validation
**NguyÃªn nhÃ¢n:** Dá»¯ liá»‡u khÃ´ng há»£p lá»‡
**Giáº£i phÃ¡p:** Kiá»ƒm tra body request theo máº«u

### âŒ Lá»—i: 404 - Resource Not Found
**NguyÃªn nhÃ¢n:** ID khÃ´ng tá»“n táº¡i trong database
**Giáº£i phÃ¡p:** 
- Kiá»ƒm tra ID trong database
- Hoáº·c táº¡o má»›i trÆ°á»›c khi test

### âŒ Lá»—i: 400 - Invalid Voucher
**NguyÃªn nhÃ¢n:** Voucher háº¿t háº¡n hoáº·c khÃ´ng Ä‘á»§ Ä‘iá»u kiá»‡n
**Giáº£i phÃ¡p:** 
- Kiá»ƒm tra ngÃ y voucher
- Kiá»ƒm tra háº¡ng thÃ nh viÃªn khÃ¡ch hÃ ng

---

## ğŸ’¡ Tips

1. **Cháº¡y theo thá»© tá»±:** Cháº¡y CREATE trÆ°á»›c, sau Ä‘Ã³ GET Ä‘á»ƒ xem káº¿t quáº£
2. **LÆ°u ID:** Sau khi táº¡o, copy ID Ä‘á»ƒ dÃ¹ng cho cÃ¡c request khÃ¡c
3. **Kiá»ƒm tra Response:** Äá»c ká»¹ response Ä‘á»ƒ hiá»ƒu dá»¯ liá»‡u tráº£ vá»
4. **Test Case Ã¢m:** Thá»­ cÃ¡c trÆ°á»ng há»£p lá»—i Ä‘á»ƒ test validation
5. **Environment:** DÃ¹ng environment variables Ä‘á»ƒ dá»… thay Ä‘á»•i

---

## ğŸ“ Ghi ChÃº

- Táº¥t cáº£ endpoint Ä‘á»u cÃ³ description chi tiáº¿t
- Body máº«u Ä‘Ã£ Ä‘Æ°á»£c cung cáº¥p sáºµn
- CÃ³ thá»ƒ sá»­a body Ä‘á»ƒ test cÃ¡c case khÃ¡c nhau
- Response cÃ³ thá»ƒ khÃ¡c tÃ¹y vÃ o dá»¯ liá»‡u trong database

---

## ğŸ‰ ChÃºc Test ThÃ nh CÃ´ng!

Náº¿u cÃ³ váº¥n Ä‘á», tham kháº£o:
- `PROMOTION_SYSTEM_README.md` - TÃ i liá»‡u API Ä‘áº§y Ä‘á»§
- `IMPLEMENTATION_SUMMARY.md` - Tá»•ng quan implementation
