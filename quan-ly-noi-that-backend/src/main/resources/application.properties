spring.application.name=quan-ly-noi-that-backend
# ----------------------------------------------------------------------
# 1. Cấu hình Database (SQL Server)
# ----------------------------------------------------------------------
spring.datasource.url=jdbc:sqlserver://qlnt-api-server-2025.database.windows.net:1433;database=qlnt_db_azure;encrypt=true;trustServerCertificate=false;hostNameInCertificate=*.database.windows.net;loginTimeout=30;
spring.datasource.driver-class-name=com.microsoft.sqlserver.jdbc.SQLServerDriver

# Thông tin đăng nhập sẽ được cung cấp bởi Render Secret Variables
spring.datasource.username=${SPRING_DATASOURCE_USERNAME}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD}

# Disable H2 Console
spring.h2.console.enabled=false

# ----------------------------------------------------------------------
# 2. Cấu hình JPA/Hibernate
# ----------------------------------------------------------------------
spring.jpa.hibernate.ddl-auto=update
spring.jpa.database-platform=org.hibernate.dialect.SQLServer2012Dialect
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.SQLServerDialect

# Đảm bảo tên bảng và cột dùng snake_case thống nhất
spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.CamelCaseToUnderscoresNamingStrategy
spring.jpa.hibernate.naming.implicit-strategy=org.springframework.boot.orm.jpa.hibernate.SpringImplicitNamingStrategy

# SQL Server specific optimizations
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# ----------------------------------------------------------------------
# 3. Encoding Configuration
# ----------------------------------------------------------------------
spring.web.locale=vi_VN
spring.messages.encoding=UTF-8
spring.jackson.deserialization.FAIL_ON_UNKNOWN_PROPERTIES=false

# Cấu hình CORS - Sẽ được cung cấp bởi Render Environment Variables
# (Giá trị này phải là URL của frontend, ví dụ: https://frontend-cua-ban.onrender.com)
app.cors.allowed-origins=${APP_CORS_ALLOWED_ORIGINS}

# Toggle Spring Security
app.security.enabled=false

# ----------------------------------------------------------------------
# 4. File Upload Configuration
# ----------------------------------------------------------------------
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=50MB
spring.servlet.multipart.enabled=true

# ----------------------------------------------------------------------
# 5. Cấu hình Email
# ----------------------------------------------------------------------
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true

# Thông tin email sẽ được cung cấp bởi Render Secret Variables
spring.mail.username=${SPRING_MAIL_USERNAME}
spring.mail.password=${SPRING_MAIL_PASSWORD}

# ----------------------------------------------------------------------
# 6. Cấu hình JWT
# ----------------------------------------------------------------------
# Khóa bí mật JWT sẽ được cung cấp bởi Render Secret Variables
application.security.jwt.secret-key=${APPLICATION_SECURITY_JWT_SECRET_KEY}
application.security.jwt.expiration=86400000
application.security.jwt.refresh-token.expiration=604800000